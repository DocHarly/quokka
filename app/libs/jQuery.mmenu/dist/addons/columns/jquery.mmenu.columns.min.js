/*	
 * jQuery mmenu columns add-on
 * mmenu.frebsite.nl
 *
 * Copyright (c) Fred Heusschen
 */
!function(s){var i="mmenu",n="columns";s[i].addons[n]={setup:function(){var t=this.opts[n];this.conf[n];if(l=s[i].glbl,"boolean"==typeof t&&(t={add:t}),"number"==typeof t&&(t={add:!0,visible:t}),"object"!=typeof t&&(t={}),"number"==typeof t.visible&&(t.visible={min:t.visible,max:t.visible}),t=this.opts[n]=s.extend(!0,{},s[i].defaults[n],t),t.add){t.visible.min=Math.max(1,Math.min(6,t.visible.min)),t.visible.max=Math.max(t.visible.min,Math.min(6,t.visible.max));for(var a=this.opts.offCanvas?this.$menu.add(l.$html):this.$menu,o=[],d=0;d<=t.visible.max;d++)o.push(e.columns+"-"+d);o=o.join(" ");var h=function(s){var i=this.$pnls.children("."+e.subopened).length;s&&!s.hasClass(e.subopened)&&i++,i=Math.min(t.visible.max,Math.max(t.visible.min,i)),a.removeClass(o).addClass(e.columns+"-"+i)},m=function(){a.removeClass(o)},r=function(i){this.$pnls.children("."+e.panel).removeClass(o).filter("."+e.subopened).add(i).slice(-t.visible.max).each(function(i){s(this).addClass(e.columns+"-"+i)})};this.bind("initMenu:after",function(){this.$menu.addClass(e.columns)}),this.bind("initPanels:after",function(s){r.call(this,this.$pnls.children("."+e.opened))}),this.bind("open:start",h),this.bind("openPanel:start",h),this.bind("openPanel:start",r),this.bind("close:finish",m),this.opts.offCanvas||openMenu.call(this)}},add:function(){e=s[i]._c,t=s[i]._d,a=s[i]._e,e.add("columns")},clickAnchor:function(i,t){if(!this.opts[n].add)return!1;if(t){var a=i.attr("href");if(a.length>1&&"#"==a.slice(0,1))try{var l=s(a,this.$menu);if(l.is("."+e.panel))for(var o=parseInt(i.closest("."+e.panel).attr("class").split(e.columns+"-")[1].split(" ")[0],10)+1;o!==!1;){var d=this.$pnls.children("."+e.columns+"-"+o);if(!d.length){o=!1;break}o++,d.removeClass(e.subopened).removeClass(e.opened).removeClass(e.highest).addClass(e.hidden)}}catch(h){}}}},s[i].defaults[n]={add:!1,visible:{min:1,max:3}};var e,t,a,l}(jQuery);